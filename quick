#!/bin/bash

CURRENT_WORKDIR=$(pwd)

CURRENT_BUILD_PARALLEL_JOBS="3"
CURRENT_BUILD_TOOLCHAIN="ios-10-2"
CURRENT_BUILD_TYPE="Release"
CURRENT_BUILD_SHARED_LIBS=OFF

IOS_DEPLOYMENT_TARGET="8.0"
MACOSX_DEPLOYMENT_TARGET="10.10"

echo "CURRENT_WORKDIR: ${CURRENT_WORKDIR}"

rm -fR ${CURRENT_WORKDIR}/_builds
rm -fR ${CURRENT_WORKDIR}/_logs

build.py  --toolchain=${CURRENT_BUILD_TOOLCHAIN} \
          --config ${CURRENT_BUILD_TYPE} \
          --jobs ${CURRENT_BUILD_PARALLEL_JOBS} \
          --reconfig \
          --clear \
	  --install \
          --fwd CMAKE_BUILD_TYPE=${CURRENT_BUILD_TYPE} \
                BUILD_SHARED_LIBS=${CURRENT_BUILD_SHARED_LIBS} \
                HUNTER_CONFIGURATION_TYPES=${CURRENT_BUILD_TYPE} \
                CMAKE_XCODE_ATTRIBUTE_IPHONEOS_DEPLOYMENT_TARGET=${IOS_DEPLOYMENT_TARGET} \
                IOS_DEPLOYMENT_TARGET=${IOS_DEPLOYMENT_TARGET}
